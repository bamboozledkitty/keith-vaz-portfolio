(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,81464,(e,t,i)=>{t.exports=e.r(73855)},684,e=>{"use strict";var t=e.i(63373);e.i(28331);var i=e.i(75028),s=e.i(68480);let r=(0,s.default)("github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]),a=(0,s.default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var c=e.i(81464),l=e.i(11358),n=e.i(90385),o=e.i(22638),d=e.i(85719),u=e.i(9634);let h=()=>{let e=(0,c.useRouter)(),s=(0,c.useSearchParams)(),{setAuth:h}=(0,o.useAuth)(),[x,m]=(0,i.useState)(null),[b,f]=(0,i.useState)(!1);(0,i.useEffect)(()=>{(async()=>{let t=s.get("code")||new URLSearchParams(window.location.search).get("code"),i=s.get("state")||new URLSearchParams(window.location.search).get("state"),r=s.get("error")||new URLSearchParams(window.location.search).get("error");if(r)return m(`GitHub authorization failed: ${r}`);if(t&&i){if(!(0,l.verifyState)(i))return m("Invalid state parameter. Security verification failed.");f(!0);try{let s=await (0,l.requestAccessToken)(t,i),r=await (0,l.fetchGitHubUser)(s);if(r.login!==n.ADMIN_USERNAME)return void m(`User ${r.login} is not authorized as admin.`);(0,l.saveAuthState)(s,r),h(s,r),window.history.replaceState({},"",window.location.pathname),e.push("/admin")}catch(e){((...e)=>{})("Auth error:",e),m(e instanceof Error?e.message:"Authentication failed")}finally{f(!1)}}})()},[h,e,s]);let g=async()=>{f(!0);let e=new URL("/admin/callback/",window.location.origin).toString(),t=(0,l.getGitHubOAuthUrl)(e);window.location.href=t};return(0,t.jsx)("div",{className:"min-h-screen bg-[#f7f6f3] flex items-center justify-center p-6",children:(0,t.jsx)("div",{className:"w-full max-w-md",children:(0,t.jsxs)(u.Squircle,{cornerRadius:16,className:"bg-white shadow-lg border border-gray-100 p-8",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-black rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(r,{size:32,className:"text-white"})}),(0,t.jsx)("h1",{className:"text-3xl font-black mb-2 tracking-tight",children:"Admin Access"}),(0,t.jsx)("p",{className:"text-gray-500 text-lg",children:"Sign in with GitHub to edit your portfolio"})]}),x&&(0,t.jsxs)(u.Squircle,{cornerRadius:8,className:"mb-6 p-4 bg-red-50 border border-red-200 flex gap-3",children:[(0,t.jsx)(a,{size:20,className:"text-red-500 flex-shrink-0 mt-0.5"}),(0,t.jsx)("p",{className:"text-sm text-red-700",children:x})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)(d.Button,{onClick:g,disabled:b,className:"w-full bg-black hover:bg-gray-900 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-3 transition-colors",children:[(0,t.jsx)(r,{size:20}),b?"Redirecting to GitHub...":"Login with GitHub"]}),!1]}),(0,t.jsxs)(u.Squircle,{cornerRadius:8,className:"mt-8 p-4 bg-blue-50 border border-blue-200",children:[(0,t.jsx)("h3",{className:"font-medium text-sm text-blue-900 mb-2",children:"Setup Instructions:"}),(0,t.jsxs)("ol",{className:"text-xs text-blue-800 space-y-2 list-decimal list-inside",children:[(0,t.jsx)("li",{children:"Create a GitHub OAuth App in your settings"}),(0,t.jsxs)("li",{children:["Set redirect URI to: ",(0,t.jsx)("code",{className:"bg-blue-100 px-1 rounded",children:`${window.location.origin}/admin/callback/`})]}),(0,t.jsx)("li",{children:"Add Client ID to environment variable NEXT_PUBLIC_GITHUB_CLIENT_ID"}),(0,t.jsx)("li",{children:"Setup a backend to exchange code for access token"})]})]})]})})})};function x(){return(0,t.jsx)(i.Suspense,{fallback:(0,t.jsx)("div",{className:"flex h-screen items-center justify-center text-lg",children:"Loading..."}),children:(0,t.jsx)(h,{})})}e.s(["default",()=>x],684)}]);