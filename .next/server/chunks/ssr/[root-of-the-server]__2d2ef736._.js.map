{"version":3,"sources":["../../../../../../Projects/keith-vaz-portfolio/node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../../../Projects/keith-vaz-portfolio/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../../../Projects/keith-vaz-portfolio/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../../../Projects/keith-vaz-portfolio/app/admin/callback/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","'use client';\n\nimport { useEffect, useRef } from 'react';\nimport { useRouter, useSearchParams } from 'next/navigation';\nimport { useAuth } from '@/contexts/AuthContext';\nimport { requestAccessToken, fetchGitHubUser } from '@/lib/auth';\n\nimport { Suspense } from 'react';\n\nfunction CallbackContent() {\n    const router = useRouter();\n    const searchParams = useSearchParams();\n    const { setAuth } = useAuth();\n    const hasHandled = useRef(false);\n\n    useEffect(() => {\n        if (hasHandled.current) return;\n\n        const code = searchParams.get('code');\n        const state = searchParams.get('state');\n\n        if (code && state) {\n            hasHandled.current = true;\n            handleOAuthCallback(code, state);\n        }\n    }, [searchParams]);\n\n    async function handleOAuthCallback(code: string, state: string) {\n        try {\n            // Exchange code for token via backend worker\n            const token = await requestAccessToken(code, state);\n\n            // Fetch user info\n            const user = await fetchGitHubUser(token);\n\n            // Store auth state\n            setAuth(token, user);\n\n            // Redirect to admin dashboard\n            router.push('/admin');\n        } catch (error) {\n            console.error('OAuth callback error:', error);\n            router.push('/admin/login?error=auth_failed');\n        }\n    }\n\n    return (\n        <div className=\"flex h-screen items-center justify-center\">\n            <div className=\"flex flex-col items-center gap-4\">\n                <div className=\"w-8 h-8 border-4 border-black border-t-transparent rounded-full animate-spin\"></div>\n                <div className=\"text-lg font-medium\">Authenticating with GitHub...</div>\n            </div>\n        </div>\n    );\n}\n\nexport default function CallbackPage() {\n    return (\n        <Suspense fallback={\n            <div className=\"flex h-screen items-center justify-center\">\n                <div className=\"text-lg\">Loading...</div>\n            </div>\n        }>\n            <CallbackContent />\n        </Suspense>\n    );\n}\n"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml"],"mappings":"+iBAAAA,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACC,gBAAgB,+BCFvCJ,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACE,kBAAkB,+BCFzCL,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACG,kBAAkB,0CCAzC,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAIA,SAAS,IACL,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,EAAe,CAAA,EAAA,EAAA,eAAA,AAAe,IAC9B,SAAE,CAAO,CAAE,CAAG,CAAA,EAAA,EAAA,OAAA,AAAO,IACrB,EAAa,CAAA,EAAA,EAAA,MAAA,AAAM,GAAC,GAc1B,eAAe,EAAoB,CAAY,CAAE,CAAa,EAC1D,GAAI,CAEA,IAAM,EAAQ,MAAM,CAAA,EAAA,EAAA,kBAAA,AAAkB,EAAC,EAAM,GAGvC,EAAO,MAAM,CAAA,EAAA,EAAA,eAAA,AAAe,EAAC,GAGnC,EAAQ,EAAO,GAGf,EAAO,IAAI,CAAC,SAChB,CAAE,MAAO,EAAO,CACZ,QAAQ,KAAK,CAAC,wBAAyB,GACvC,EAAO,IAAI,CAAC,iCAChB,CACJ,CAEA,MA/BA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACN,GAAI,EAAW,OAAO,CAAE,OAExB,IAAM,EAAO,EAAa,GAAG,CAAC,QACxB,EAAQ,EAAa,GAAG,CAAC,SAE3B,GAAQ,IACR,EAAW,CADI,MACG,EAAG,EACrB,EAAoB,EAAM,GAElC,EAAG,CAAC,EAAa,EAsBb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qDACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6CACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iFACf,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+BAAsB,sCAIrD,CAEe,SAAS,IACpB,MACI,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,SACN,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qDACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mBAAU,0BAG7B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAA,IAGb","ignoreList":[0,1,2]}