module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},47599,(a,b,c)=>{"use strict";b.exports=a.r(18622)},50455,(a,b,c)=>{"use strict";b.exports=a.r(47599).vendored["react-ssr"].ReactJsxRuntime},53444,(a,b,c)=>{"use strict";b.exports=a.r(47599).vendored["react-ssr"].React},42255,12500,28361,a=>{"use strict";var b=a.i(50455),c=a.i(53444);let d=process.env.NEXT_PUBLIC_GITHUB_CLIENT_ID||"",e="user:email repo";a.s(["ADMIN_USERNAME",0,"bamboozledkitty","GITHUB_CLIENT_ID",0,d,"GITHUB_OAUTH_SCOPES",0,e],12500);let f=()=>({isAuthenticated:!1,isAdmin:!1,user:null,token:null}),g=async a=>{let b=await fetch("https://api.github.com/user",{headers:{Authorization:`Bearer ${a}`,Accept:"application/vnd.github.v3+json"}});if(!b.ok)throw Error("Failed to fetch GitHub user");return b.json()},h=(a,b)=>{},i=()=>{},j=process.env.NEXT_PUBLIC_CLOUDFLARE_WORKER_URL||"https://portfolio-auth.keith-klv.workers.dev",k=async(a,b)=>{let c=await fetch(j,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:a,state:b})});if(!c.ok)throw Error((await c.json().catch(()=>({error:"Unknown error"}))).error||"Failed to exchange token");let d=await c.json();if(!d.access_token)throw Error("No access token received");return d.access_token};a.s(["clearAuthState",0,i,"fetchGitHubUser",0,g,"getAuthState",0,f,"getGitHubOAuthUrl",0,a=>{let b,c,f=new URLSearchParams({client_id:d,redirect_uri:a,scope:e,state:(b=new Uint8Array(32),crypto.getRandomValues(b),c=Array.from(b,a=>a.toString(16).padStart(2,"0")).join(""),sessionStorage.setItem("oauth_state",c),c)});return`https://github.com/login/oauth/authorize?${f.toString()}`},"requestAccessToken",0,k,"saveAuthState",0,h,"verifyState",0,a=>{let b=sessionStorage.getItem("oauth_state");return sessionStorage.removeItem("oauth_state"),a===b}],28361);let l=(0,c.createContext)(void 0);a.s(["AuthProvider",0,({children:a})=>{let[d,e]=(0,c.useState)(f()),[j,k]=(0,c.useState)(!0);return(0,c.useEffect)(()=>{(async()=>{let a=f();if(a.token&&a.user)try{await g(a.token)}catch(a){i(),e(f())}k(!1)})()},[]),(0,b.jsx)(l.Provider,{value:{isAuthenticated:d.isAuthenticated,isAdmin:d.isAdmin,user:d.user,token:d.token,setAuth:(a,b)=>{h(a,b),e(f())},logout:()=>{i(),e(f())},isLoading:j},children:a})},"useAuth",0,()=>{let a=(0,c.useContext)(l);if(void 0===a)throw Error("useAuth must be used within AuthProvider");return a}],42255)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__fcbc83bb._.js.map